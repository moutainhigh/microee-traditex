(this["webpackJsonpmicroee-traditex-dashboard-fe"]=this["webpackJsonpmicroee-traditex-dashboard-fe"]||[]).push([[0],{202:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(75),s=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c,i=a(4),l=a(80),d=a(45),u=a(46),p=a(2),h=a(34),m=a(27),k=a(28),f=a(82),b=a(81),g=a(48),v=a(30),y=a(76),O=a.n(y),B=a(31),j=a(32),E=a(33),w=a(47),N=a.n(w),S=new(c=function(){function e(){Object(m.a)(this,e)}return Object(k.a)(e,[{key:"getPricing",value:function(e){E.HttpWrapper.create()({method:"get",url:"/trads/getPricing",data:null,headers:{"Content-Type":"application/json"}}).then((function(t){e(t.data)}))}},{key:"getBalances",value:function(e,t,a){E.HttpWrapper.create()({method:"get",url:"/trads/getBalances?"+N.a.stringify({type:e,currency:t},{sort:!1}),data:null,headers:{"Content-Type":"application/json"}}).then((function(e){a(e.data)}))}},{key:"getAccountBalances",value:function(e,t,a){E.HttpWrapper.create()({method:"get",url:"/trads/getAccountBalances?"+N.a.stringify({type:e,currency:t},{sort:!1}),data:null,headers:{"Content-Type":"application/json"}}).then((function(e){a(e.data)}))}}]),e}(),Object(B.a)(c.prototype,"getPricing",[j.a],Object.getOwnPropertyDescriptor(c.prototype,"getPricing"),c.prototype),Object(B.a)(c.prototype,"getBalances",[j.a],Object.getOwnPropertyDescriptor(c.prototype,"getBalances"),c.prototype),Object(B.a)(c.prototype,"getAccountBalances",[j.a],Object.getOwnPropertyDescriptor(c.prototype,"getAccountBalances"),c.prototype),c);function D(){var e=Object(d.a)(["\n    ","\n"]);return D=function(){return e},e}function _(){var e=Object(d.a)(["&{\n  .clear {\n    clear: both;\n    float: none;\n  }\n  .orderbook {\n    float:left;\n  }\n  .orderbook .asks {\n    background-color:cornflowerblue;\n  }\n  .orderbook .bids {\n    background-color:aliceblue;\n  }\n  .orderbook .asks, .orderbook .bids {\n    font-size: 0.625em;\n    float:left;\n  }\n  .orderbook .asks ul, .orderbook .bids ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n  }\n\n  .diskorders, .httpnetwork {\n    float:left;\n  }\n  .diskorders .asks {\n    background-color:burlywood;\n  }\n  .diskorders .bids {\n    background-color:antiquewhite;\n  }\n  .diskorders .asks, .diskorders .bids {\n    font-size: 0.625em;\n    float:left;\n  }\n  .diskorders .asks ul, .diskorders .bids ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n  }\n\n  .top-section .balance {\n    margin-left: 1em;\n  }\n  .top-section .balance ul {\n    font-size: 1.15em;\n    font-weight: bold;\n  }\n  .top-section .balance ul li {\n    width: 285px;\n  }\n  .top-section .account-balance ul li {\n    width: 585px;\n  }\n  .top-section .solr-balance ul li {\n    width: 385px;\n  }\n  .top-section .oanda, .top-section .balance {\n    float: left;\n  }\n  .top-section .oanda ul, .top-section .balance ul, .httpnetwork ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n  }\n\n  .httpnetwork ul {\n    font-size: .625em;\n  }\n\n  .httpnetwork-speed span {\n    width: 55px;\n    display: inline-block;\n  }\n  .httpNetwork-logger-items {\n    font-size: .625em;\n    background-color: blue;\n    color: white;\n  }\n  .httpNetwork-logger-items span {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    display: inline-block;\n    display: inline-block;\n  }\n  .httpNetwork-logger-items span.time {\n    width: 75px;\n    text-align: right;\n  }\n  .httpNetwork-logger-items span.speed {\n    width: 28px;\n    text-align: right;\n  }\n  .httpNetwork-logger-items span.method {\n    width: 40px;\n    text-align: right;    \n    margin-right: 7px;\n  }\n  .httpNetwork-logger-items span.url {\n    width: 650px;\n  }\n}"]);return _=function(){return e},e}var x=Object(v.Fake)("moment"),T=Object(v.Fake)("_"),A=Object(v.Fake)("jQuery"),z="/topic/timer",F="/topic/__traditex.message.pricing",C="/topic/__traditex.message.orderbook",J="/topic/__traditex.message.diskorders",P="/topic/__traditex.message.httpnetwork",L="/topic/__traditex.message.httplog.listener",H="/topic/__traditex.message.revokeorder.count",W="/topic/__traditex.message.account.balance",Y="/topic/__traditex.message.disk-account.balancess",I="/topic/__traditex.message.solr-account.balancess",M=function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={accountDiskBalance:{},accountSolrBalance:{},httpNetworkLogger:{speed:0,max:0,min:0,items:[]}},n}return Object(k.a)(a,[{key:"getTopicValues",value:function(e){for(var t=[],a=0,n=Object.entries(e);a<n.length;a++){var r=Object(h.a)(n[a],2),o=(r[0],r[1]);t.push(o)}return t}},{key:"componentDidMount",value:function(){var e=this;S.getPricing((function(t){200!==t.code&&201!==t.code||e.setState(Object(p.a)(Object(p.a)({},e.state),{},{oanda:t.data[0],theTopics:e.getTopicValues(e.state.theTopicsDef)}),(function(){console.log(e.state.theTopicsDef,"theTopics")}))})),this.queryAccountBalance()}},{key:"processDiskAccountBalance",value:function(e){var t=e.filter((function(e){return"btc"===e.currency})),a=t.filter((function(e){return"trade"===e.type})),n=t.filter((function(e){return"frozen"===e.type})),r=e.filter((function(e){return"jpy"===e.currency})),o=r.filter((function(e){return"trade"===e.type})),s=r.filter((function(e){return"frozen"===e.type})),c={tradeBalance:a.length>0?parseFloat(a[0].balance):0,frozenBalance:n.length>0?parseFloat(n[0].balance):0},i={tradeBalance:o.length>0?parseFloat(o[0].balance):0,frozenBalance:s.length>0?parseFloat(s[0].balance):0},l=Object(p.a)(Object(p.a)({},c),{},{rate:(c.frozenBalance/c.tradeBalance*100).toFixed(4)+"%"}),d=Object(p.a)(Object(p.a)({},i),{},{rate:(i.frozenBalance/i.tradeBalance*100).toFixed(4)+"%"});this.setState(Object(p.a)(Object(p.a)({},this.state),{},{accountDiskBalancesBTC:l,accountDiskBalancesJPY:d}))}},{key:"processSolrAccountBalance",value:function(e){var t=e.filter((function(e){return"btc"===e.currency})),a=t.filter((function(e){return"trade"===e.type})),n=t.filter((function(e){return"frozen"===e.type})),r=e.filter((function(e){return"usdt"===e.currency})),o=r.filter((function(e){return"trade"===e.type})),s=r.filter((function(e){return"frozen"===e.type})),c={tradeBalance:a.length>0?parseFloat(a[0].balance):0,frozenBalance:n.length>0?parseFloat(n[0].balance):0},i={tradeBalance:o.length>0?parseFloat(o[0].balance):0,frozenBalance:s.length>0?parseFloat(s[0].balance):0},l=Object(p.a)(Object(p.a)({},c),{},{rate:(c.frozenBalance/c.tradeBalance*100).toFixed(4)+"%"}),d=Object(p.a)(Object(p.a)({},i),{},{rate:(i.frozenBalance/i.tradeBalance*100).toFixed(4)+"%"});this.setState(Object(p.a)(Object(p.a)({},this.state),{},{accountSolrBalancesBTC:l,accountSolrBalancesUSDT:d}))}},{key:"queryAccountBalance",value:function(){var e=this;S.getAccountBalances("disk",["btc","jpy"],(function(t){200!==t.code&&201!==t.code||e.processDiskAccountBalance(t.data)})),S.getAccountBalances("solr",["btc","usdt"],(function(t){200!==t.code&&201!==t.code||e.processSolrAccountBalance(t.data)}))}},{key:"onWebSocketMessage",value:function(e,t){if(t!==this.state.theTopicsDef.timer)if(t!==this.state.theTopicsDef.orderbook)if(t!==this.state.theTopicsDef.pricing)if(t!==this.state.theTopicsDef.diskorders)if(t!==this.state.theTopicsDef.accountBalance)if(t!==this.state.theTopicsDef.diskAccount)if(t!==this.state.theTopicsDef.solrAccount)if(t!==this.state.theTopicsDef.revokeorder){if(t===this.state.theTopicsDef.httplog){var a=e,n=a.speed,r=this.state.httpNetworkLogger.max,o=this.state.httpNetworkLogger.min,s=this.state.httpNetworkLogger.items;return s.push(a),r<a.speed&&(r=a.speed),(0===o||n<o)&&(o=n),void this.setState(Object(p.a)(Object(p.a)({},this.state),{},{httpNetworkLogger:{speed:n,max:r,min:o,items:s.slice(s.length>15?s.length-15:0)}}))}console.log(e,t)}else{for(var c=JSON.parse(e),i=this.state.diskorders,l=0,d=Object.entries(c);l<d.length;l++){var m=Object(h.a)(d[l],2),k=m[0],f=m[1];if(i&&0!==i.length){var b,g=Object(u.a)(i);try{for(g.s();!(b=g.n()).done;){var v=b.value;v.orderId===k&&(v.revokeCount=f)}}catch(z){g.e(z)}finally{g.f()}}}this.setState(Object(p.a)(Object(p.a)({},this.state),{},{revokeCount:c,diskorders:i}))}else{var y=JSON.parse(e);this.processSolrAccountBalance(y)}else{var O=JSON.parse(e);this.processDiskAccountBalance(O)}else{var B,j=JSON.parse(e),E=j.list,w=this.state.accountDiskBalance,N=this.state.accountSolrBalance,S=Object(u.a)(E);try{for(S.s();!(B=S.n()).done;){var D=B.value,_=D.currency;"disk"===j.type&&(w[_]=D.balance),"solr"===j.type&&(N[_]=D.balance)}}catch(z){S.e(z)}finally{S.f()}this.setState(Object(p.a)(Object(p.a)({},this.state),{},{accountDiskBalance:w,accountSolrBalance:N}))}else{var T=this.processDiskOrders(JSON.parse(e));this.setState(Object(p.a)(Object(p.a)({},this.state),{},{diskorders:T}))}else this.setState(Object(p.a)(Object(p.a)({},this.state),{},{oanda:JSON.parse(e)}));else{var A=JSON.parse(e);this.setState(Object(p.a)(Object(p.a)({},this.state),{},{orderbook:{symbol:A.symbol,asks:JSON.parse(A.asks),bids:JSON.parse(A.bids)}}))}else this.setState(Object(p.a)(Object(p.a)({},this.state),{},{serverTimer:x(e).format("YYYY-MM-DD HH:mm:ss")}))}},{key:"processDiskOrders",value:function(e){for(var t=[],a=0,n=Object.entries(e);a<n.length;a++){var r=Object(h.a)(n[a],2),o=r[0],s=r[1],c=JSON.parse(s).distOrderParam;t.push({pick:c.pick,orderId:o,side:c.side,symbol:c.symbol,amount:parseFloat(c.amount),price:parseFloat(c.price),revokeCount:0})}return T.orderBy(t,["pick"],["asc"])}},{key:"getOrderBookAsksSection",value:function(){return this.state.orderbook.asks.map((function(e,t){return r.a.createElement("li",{key:t},e[0]," - ",e[1])}))}},{key:"getOrderBookBidsSection",value:function(){return this.state.orderbook.bids.map((function(e,t){return r.a.createElement("li",{key:t},e[0]," - ",e[1])}))}},{key:"getDiskOrdersAsksSection",value:function(){return this.state.diskorders.filter((function(e){return"SELL"===e.side})).map((function(e,t){return r.a.createElement("li",{key:t},"[",e.revokeCount,"/",e.pick,"]-",e.orderId," - ",e.price," - ",e.amount)}))}},{key:"getDiskOrdersBidsSection",value:function(){return this.state.diskorders.filter((function(e){return"BUY"===e.side})).map((function(e,t){return r.a.createElement("li",{key:t},e.price," - ",e.amount," - ",e.orderId,"-[",e.revokeCount,"/",e.pick,"] ")}))}},{key:"getHttpNetworkSection",value:function(){return this.state.httpNetworkLogger.items.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("span",{className:"time"},x(e.start).format("HH:mm:ss.SSS")),r.a.createElement("span",{className:"speed"},e.speed),r.a.createElement("span",{className:"method"},e.method.toUpperCase()),r.a.createElement("span",{className:"url"},e.URL)," ")}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.httpNetworkLogger,n=t.accountDiskBalancesBTC,o=t.accountDiskBalancesJPY,s=t.accountSolrBalancesBTC,c=t.accountSolrBalancesUSDT;return r.a.createElement("div",{className:"".concat(this.props.className," IndexPage")},r.a.createElement("h2",{id:"server_time",style:{color:"crimson",fontWeight:"bold",textAlign:"center"}},this.state.serverTimer),this.state.httpNetworkLogger&&r.a.createElement("div",{className:"top-section"},r.a.createElement("div",{className:"httpNetwork-logger"},r.a.createElement("h3",{className:"httpnetwork-speed"},"HttpNetwork Interceptor: \u5f53\u524d-",r.a.createElement("span",null,a.speed),", \u6700\u9ad8-",r.a.createElement("span",null,a.max),", \u6700\u4f4e-",r.a.createElement("span",null,a.min)),r.a.createElement("div",{className:"httpNetwork-logger-items"},this.state.httpNetworkLogger&&this.getHttpNetworkSection()))),r.a.createElement("div",{className:"top-section"},r.a.createElement("div",{className:"oanda"},r.a.createElement("h3",null,"Oanda - ",this.state.oanda&&this.state.oanda.instrument),r.a.createElement("h3",null,"\u5356: ",r.a.createElement("span",null,this.state.oanda&&this.state.oanda.sell)),r.a.createElement("h3",null,"\u4e70: ",r.a.createElement("span",null,this.state.oanda&&this.state.oanda.buy))),r.a.createElement("div",{className:"balance account-balance"},r.a.createElement("h3",null,"Disk Account Balance"),n&&r.a.createElement("ul",null,r.a.createElement("li",null,"BTC: ",n.tradeBalance," / ",n.frozenBalance," / ",n.rate),r.a.createElement("li",null,"JPY: ",o.tradeBalance," / ",o.frozenBalance," / ",o.rate))),r.a.createElement("div",{className:"balance account-balance"},r.a.createElement("h3",null,"Solr Account Balance"),s&&r.a.createElement("ul",null,r.a.createElement("li",null,"BTC: ",s.tradeBalance," / ",s.frozenBalance," / ",s.rate),r.a.createElement("li",null,"USDT: ",c.tradeBalance," / ",c.frozenBalance," / ",c.rate))),r.a.createElement("div",{className:"clear"})),r.a.createElement("div",{className:"orderbook"},r.a.createElement("h3",null,"OrderBook - ",this.state.orderbook&&this.state.orderbook.symbol),r.a.createElement("div",{className:"asks"},r.a.createElement("h3",null,"\u5356"),this.state.orderbook&&r.a.createElement("ul",null," ",this.getOrderBookAsksSection())),r.a.createElement("div",{className:"bids"},r.a.createElement("h3",null,"\u4e70"),this.state.orderbook&&r.a.createElement("ul",null," ",this.getOrderBookBidsSection())),r.a.createElement("div",{className:"clear"})),r.a.createElement("div",{className:"diskorders"},r.a.createElement("h3",null,"diskorders - ",this.state.diskorders&&this.state.diskorders.length>0&&this.state.diskorders[0].symbol," - ",this.state.diskorders&&this.state.diskorders.length),r.a.createElement("div",{className:"asks"},r.a.createElement("h3",null,"\u5356"),this.state.diskorders&&r.a.createElement("ul",null," ",this.getDiskOrdersAsksSection())),r.a.createElement("div",{className:"bids"},r.a.createElement("h3",null,"\u4e70"),this.state.diskorders&&r.a.createElement("ul",null," ",this.getDiskOrdersBidsSection())),r.a.createElement("div",{className:"clear"})),r.a.createElement("div",{className:"clear"}),r.a.createElement("div",null,r.a.createElement(O.a,{url:"/_sockjs",topics:this.state.theTopics||[],onMessage:function(t,a){e.onWebSocketMessage(t,a)},ref:function(t){e.clientRef=t}})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Object(p.a)(Object(p.a)({},t),{},{theTopicsDef:{timer:z,pricing:A("#topic_pricing").val()?A("#topic_pricing").val():F,orderbook:A("#topic_orderbook").val()?A("#topic_orderbook").val():C,diskorders:A("#topic_diskorders").val()?A("#topic_diskorders").val():J,httpnetwork:A("#topic_httpnetwork").val()?A("#topic_httpnetwork").val():P,httplog:A("#topic_httplog").val()?A("#topic_httplog").val():L,revokeorder:A("#topic_revokeorder").val()?A("#topic_revokeorder").val():H,accountBalance:A("#topic_accountBalance").val()?A("#topic_accountBalance").val():W,diskAccount:A("#topic_diskAccount").val()?A("#topic_diskAccount").val():Y,solrAccount:A("#topic_solrAccount").val()?A("#topic_solrAccount").val():I}})}}]),a}(n.Component),U=Object(g.a)(_()),q=Object(g.b)(M)(D(),U),R=function(){return r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:["/","/index"],component:q}))};s.a.render(r.a.createElement(l.a,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},83:function(e,t,a){e.exports=a(202)}},[[83,1,2]]]);
//# sourceMappingURL=main.chunk.js.map